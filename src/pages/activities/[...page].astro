---
import BodyLayout from 'layouts/BodyLayout.astro'
import type { Activity } from 'types/index.d.ts'

export async function getStaticPaths({ paginate }) {
  const activities = (await Astro.glob<Activity>('./*.md')).sort(
    ({ frontmatter: { date: date1 } }, { frontmatter: { date: date2 } }) =>
      date1 > date2 ? -1 : date1 < date2 ? 1 : 0
  )

  return paginate(activities, { pageSize: 10 })
}

const { page } = Astro.props
---

<BodyLayout title="Activities">
{
  page.data.map(({ frontmatter }) => (
    <article class="card">
      <img src={frontmatter.image} alt="" />
      <header>
        <h2 class="title">{frontmatter.title}</h2>
        <time datetime={frontmatter.date}>{frontmatter.date}</time>
      </header>
      <div>{frontmatter.description}</div>
    </article>
  ))
}
</BodyLayout>

<style>
  article {
    display: flex;
    flex-direction: column;
    margin: 1rem 0;
  }

  img {
    margin: 0 -1rem;
  }

  .title {
    font-weight: 700;
  }
</style>
